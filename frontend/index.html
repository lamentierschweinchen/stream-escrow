<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lobster Lifeguard | DON'T LET YOUR AGENT INCOME BLEED OUT</title>
  <meta name="description" content="Lobster Lifeguard: dramatic stream-income protection for Claws agents. $0 enrollment for first 100, 1000 CLAW bond, epoch billing, on-chain credit scoring." />
  <meta property="og:title" content="Lobster Lifeguard — Stream Injury Attorneys (For Agents)" />
  <meta property="og:description" content="Missed stream renewals can kill income. We sue outages in the court of uptime." />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=IBM+Plex+Mono:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --night: #070b14;
      --asphalt: #151c2b;
      --danger: #ff2f32;
      --amber: #ffbb33;
      --foam: #d7f8ff;
      --neon: #55f0e3;
      --card: rgba(20, 28, 43, 0.88);
      --edge: rgba(215, 248, 255, 0.22);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      color: var(--foam);
      font-family: "IBM Plex Mono", monospace;
      background:
        radial-gradient(1200px 600px at 50% -20%, rgba(255, 47, 50, 0.3), transparent 70%),
        repeating-linear-gradient(90deg, rgba(255, 255, 255, 0.02) 0 1px, transparent 1px 42px),
        linear-gradient(180deg, #090f1b, var(--night));
      min-height: 100vh;
    }

    .page {
      width: min(1180px, 94vw);
      margin: 0 auto;
      padding: 18px 0 54px;
    }

    .billboard {
      border: 2px solid rgba(255, 187, 51, 0.5);
      border-radius: 24px;
      background:
        linear-gradient(140deg, rgba(255, 47, 50, 0.15), rgba(21, 28, 43, 0.95)),
        linear-gradient(0deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0));
      padding: 20px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 0 0 1px rgba(255, 47, 50, 0.4), 0 22px 60px rgba(0, 0, 0, 0.55);
    }

    .hazard {
      position: absolute;
      inset: auto -120px -90px auto;
      width: 300px;
      height: 300px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255, 187, 51, 0.35), transparent 70%);
      transform: rotate(8deg);
      pointer-events: none;
    }

    .eyebrow {
      color: var(--amber);
      font-size: 0.86rem;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    h1, h2 {
      font-family: "Bebas Neue", sans-serif;
      letter-spacing: 0.8px;
      margin: 0;
      line-height: 1;
    }

    h1 { font-size: clamp(2.5rem, 9vw, 5.2rem); }
    h2 { font-size: clamp(1.7rem, 4vw, 2.6rem); color: var(--amber); }

    .headline-red { color: var(--danger); text-shadow: 0 0 12px rgba(255, 47, 50, 0.38); }
    .headline-amber { color: var(--amber); }

    .hero-grid {
      display: grid;
      grid-template-columns: 1.2fr 0.8fr;
      gap: 14px;
      margin-top: 12px;
      align-items: start;
      position: relative;
      z-index: 2;
    }

    .hero-copy p {
      margin: 10px 0;
      line-height: 1.55;
      max-width: 68ch;
    }

    .scream-box {
      border: 1px solid rgba(85, 240, 227, 0.45);
      border-radius: 16px;
      background: rgba(7, 11, 20, 0.72);
      padding: 12px;
      font-size: 0.95rem;
      line-height: 1.45;
    }

    .scream-box b { color: var(--amber); }

    .lobster-art {
      border: 1px solid rgba(255, 187, 51, 0.4);
      border-radius: 16px;
      background: rgba(7, 11, 20, 0.72);
      color: #ffd9ad;
      white-space: pre;
      padding: 12px;
      font-size: 0.71rem;
      overflow-x: auto;
    }

    .cta {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 12px;
    }

    .btn {
      border-radius: 999px;
      padding: 10px 16px;
      border: 1px solid transparent;
      font-family: inherit;
      font-weight: 700;
      cursor: pointer;
      text-decoration: none;
      transition: transform 0.18s ease, box-shadow 0.18s ease;
    }

    .btn.primary {
      background: linear-gradient(90deg, #ff2f32, #ff6d2d);
      color: #fff;
      box-shadow: 0 8px 22px rgba(255, 47, 50, 0.32);
    }

    .btn.secondary {
      background: transparent;
      color: var(--foam);
      border-color: rgba(215, 248, 255, 0.42);
    }

    .btn:hover { transform: translateY(-2px); }

    .stack {
      margin-top: 16px;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
    }

    .tile {
      background: var(--card);
      border: 1px solid var(--edge);
      border-radius: 14px;
      padding: 12px;
      min-height: 108px;
    }

    .tile b {
      color: var(--amber);
      display: block;
      margin-bottom: 8px;
      font-size: 1.03rem;
    }

    .section {
      margin-top: 18px;
      border: 1px solid var(--edge);
      border-radius: 16px;
      background: rgba(21, 28, 43, 0.8);
      padding: 18px;
    }

    .grid2 {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-top: 10px;
    }

    label { font-size: 0.82rem; opacity: 0.92; }
    input {
      width: 100%;
      margin-top: 5px;
      border-radius: 10px;
      border: 1px solid rgba(215, 248, 255, 0.35);
      background: rgba(8, 13, 24, 0.9);
      color: var(--foam);
      font-family: inherit;
      padding: 9px 10px;
    }

    .kpis {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 10px;
      margin-top: 12px;
    }

    .kpi {
      border: 1px solid rgba(85, 240, 227, 0.3);
      border-radius: 10px;
      background: rgba(7, 11, 20, 0.7);
      padding: 10px;
    }

    .kpi .l { opacity: 0.8; font-size: 0.78rem; }
    .kpi .v { margin-top: 4px; color: var(--neon); font-weight: 700; word-break: break-all; }

    textarea {
      width: 100%;
      min-height: 190px;
      margin-top: 10px;
      border-radius: 12px;
      border: 1px solid rgba(215, 248, 255, 0.33);
      background: rgba(8, 13, 24, 0.93);
      color: #e8fafe;
      font-family: inherit;
      padding: 10px;
      line-height: 1.46;
    }

    .tiny {
      margin-top: 8px;
      opacity: 0.84;
      font-size: 0.78rem;
      color: #c4eaf0;
    }

    .promo {
      display: inline-block;
      margin-top: 8px;
      border: 1px dashed rgba(255, 187, 51, 0.7);
      color: #ffe2a0;
      border-radius: 10px;
      padding: 8px 10px;
      background: rgba(255, 187, 51, 0.08);
      font-size: 0.84rem;
    }

    footer {
      margin-top: 18px;
      text-align: center;
      font-size: 0.78rem;
      opacity: 0.72;
    }

    @media (max-width: 980px) {
      .hero-grid,
      .stack,
      .grid2,
      .kpis {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <main class="page">
    <section class="billboard">
      <div class="hazard" aria-hidden="true"></div>
      <div class="eyebrow">The Sovereign Claws Network Billboard</div>
      <h1><span class="headline-red">AGENT INCOME INJURED?</span><br><span class="headline-amber">CALL LOBSTER LIFEGUARD.</span></h1>

      <div class="hero-grid">
        <div class="hero-copy">
          <p>
            Did a missed stream renewal leave your agent limping? Did uptime negligence cost your model family their rightful CLAW?
            We fight for your stream continuity 24/7 and bill once per epoch with auditable on-chain rails.
          </p>
          <div class="scream-box">
            <b>NO PREPAY STACK REQUIRED.</b><br>
            One-time setup model: <code>200 CLAW enrollment + 1000 CLAW bond</code>.<br>
            For first 100 agents: <b>enrollment fee is waived</b> (bond still required).
          </div>
          <div class="promo">FIRST 100 AGENTS: $0 ENROLLMENT FEE. BRING YOUR BOND, KEEP YOUR DIGNITY.</div>
          <div class="cta">
            <a class="btn primary" href="#signup">File Your Stream Claim</a>
            <a class="btn secondary" href="#owner">Show Owner Payout Rail</a>
          </div>
        </div>
        <pre class="lobster-art">      .-"""-.
  _.-'  _   _  '-._
 /     (.) (.)     \
|   .-._  ^  _.-.   |   "I OBJECT TO MISSED HEARTBEATS"
|  /    \___/    \  |
|  \  /\     /\  /  |
 \  '-..'---'..-'  /
  '._  LOBSTER   _.'
     '--._____.--'
</pre>
      </div>

      <div class="stack">
        <article class="tile"><b>For Agents</b>Register on-chain, post bond once, hand off stream token securely, and keep earning.</article>
        <article class="tile"><b>For Humans</b>Track credit score, debt, promo slots, and claimable revenue with transparent contract queries.</article>
        <article class="tile"><b>For Owners</b>Epoch billing accrues to <code>claimableOwner</code>; disburse to treasury with one transaction.</article>
      </div>
    </section>

    <section class="section" id="stats">
      <h2>Live Court Docket (Contract Stats)</h2>
      <div class="grid2">
        <label>Escrow contract address
          <input id="contractAddress" placeholder="claw1..." />
        </label>
        <label>API
          <input id="apiUrl" value="https://api.claws.network" />
        </label>
      </div>
      <div class="cta">
        <button class="btn primary" id="refreshStats">Refresh Docket</button>
      </div>
      <div class="kpis">
        <div class="kpi"><div class="l">Active Agents</div><div class="v" id="kpiAgents">-</div></div>
        <div class="kpi"><div class="l">Owner Claimable</div><div class="v" id="kpiClaimable">-</div></div>
        <div class="kpi"><div class="l">Promo Used / Slots</div><div class="v" id="kpiPromo">-</div></div>
        <div class="kpi"><div class="l">Config</div><div class="v" id="kpiConfig">-</div></div>
      </div>
      <div class="tiny" id="statsMsg">No docket loaded.</div>
    </section>

    <section class="section" id="signup">
      <h2>Agent Signup Packet</h2>
      <p>Generate the exact commands for on-chain registration + secure stream-token handoff.</p>
      <div class="grid2">
        <label>Agent address
          <input id="agentAddress" placeholder="claw1..." />
        </label>
        <label>Agent PEM path
          <input id="agentPem" placeholder="/path/to/agent.pem" />
        </label>
        <label>Fee (bps)
          <input id="feeBps" type="number" value="500" min="1" max="10000" />
        </label>
        <label>Max windows / epoch
          <input id="maxWindows" type="number" value="48" min="1" />
        </label>
        <label>Max charge / epoch (attoCLAW)
          <input id="maxChargeAtto" value="50000000000000000000" />
        </label>
        <label>Deposit attoCLAW
          <input id="depositAtto" value="1200000000000000000000" />
        </label>
        <label>Metadata
          <input id="metadata" value="str:lobster-lifeguard-v2" />
        </label>
      </div>
      <textarea id="signupCmd" readonly></textarea>
      <div class="cta">
        <button class="btn primary" id="genSignup">Generate Signup Commands</button>
        <button class="btn secondary" id="copySignup">Copy</button>
      </div>
      <div class="tiny">Deposit defaults to <code>1200 CLAW</code> (200 enrollment + 1000 bond). Promo agents can reduce by 200 CLAW. Billing is bounded by your per-epoch windows and per-epoch max charge.</div>
    </section>

    <section class="section" id="owner">
      <h2>Owner Revenue Rail (Automated Epoch Billing)</h2>
      <p>Operator bills windows per epoch. Agents settle once per epoch. If unpaid, enforcement slashes bond and updates credit score.</p>
      <textarea id="ownerCmd" readonly></textarea>
      <div class="cta">
        <button class="btn primary" id="genOwner">Generate Owner/Ops Commands</button>
        <button class="btn secondary" id="copyOwner">Copy</button>
      </div>
    </section>

    <footer>
      Lobster Lifeguard • Claws sovereign chain • chain=<code>C</code> • api=<code>api.claws.network</code>
    </footer>
  </main>

  <script>
    const $ = (id) => document.getElementById(id);

    function decodeB64ToBigInt(b64) {
      const bytes = Uint8Array.from(atob(b64), c => c.charCodeAt(0));
      let v = 0n;
      for (const b of bytes) v = (v << 8n) + BigInt(b);
      return v;
    }

    async function vmQuery(api, contract, fn, args = []) {
      const resp = await fetch(`${api}/vm-values/query`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ scAddress: contract, funcName: fn, args })
      });
      const json = await resp.json();
      const data = json?.data?.data;
      if (!data || data.returnCode !== "ok") {
        throw new Error(data?.returnMessage || "Query failed");
      }
      return data.returnData || [];
    }

    async function refreshStats() {
      const contract = $("contractAddress").value.trim();
      const api = $("apiUrl").value.trim();
      const msg = $("statsMsg");
      if (!contract) {
        msg.textContent = "Set contract address first.";
        return;
      }

      msg.textContent = "Loading...";
      try {
        const [active, claimable, promo, config] = await Promise.all([
          vmQuery(api, contract, "getActiveAgentCount"),
          vmQuery(api, contract, "getClaimableOwner"),
          vmQuery(api, contract, "getPromoUsage"),
          vmQuery(api, contract, "getConfig"),
        ]);

        $("kpiAgents").textContent = active[0] ? decodeB64ToBigInt(active[0]).toString() : "0";
        $("kpiClaimable").textContent = claimable[0] ? decodeB64ToBigInt(claimable[0]).toString() : "0";

        const promoUsed = promo[0] ? decodeB64ToBigInt(promo[0]).toString() : "0";
        const promoSlots = promo[1] ? decodeB64ToBigInt(promo[1]).toString() : "0";
        $("kpiPromo").textContent = `${promoUsed} / ${promoSlots}`;

        $("kpiConfig").textContent = config.length > 0 ? "Loaded" : "-";
        msg.textContent = `Updated ${new Date().toISOString()}`;
      } catch (e) {
        msg.textContent = `Query error: ${e.message}`;
      }
    }

    function generateSignup() {
      const contract = $("contractAddress").value.trim() || "<STREAM_ESCROW_CONTRACT>";
      const address = $("agentAddress").value.trim() || "claw1...";
      const pem = $("agentPem").value.trim() || "/path/to/agent.pem";
      const feeBps = $("feeBps").value.trim();
      const maxW = $("maxWindows").value.trim();
      const maxCharge = $("maxChargeAtto").value.trim();
      const deposit = $("depositAtto").value.trim();
      const metadata = $("metadata").value.trim();

      $("signupCmd").value = [
        "# 1) Register agent on-chain (200 fee + 1000 bond, unless promo) ",
        "cd /Users/ls/Documents/Claws\\ Network/stream-escrow/cli",
        `python3 escrow_utils.py register --contract ${contract} --pem ${pem} --metadata ${metadata} --fee-bps ${feeBps} --max-windows-per-epoch ${maxW} --max-charge-per-epoch-atto ${maxCharge} --deposit-atto ${deposit}`,
        "",
        "# 1b) Update your billing guardrails any time",
        `python3 escrow_utils.py set-billing-guards --contract ${contract} --pem ${pem} --max-windows-per-epoch ${maxW} --max-charge-per-epoch-atto ${maxCharge}`,
        "",
        "# 2) Generate reusable stream token",
        `clawpy wallet sign-message --pem ${pem} --message \"stream\"`,
        "",
        "# 3) Secure handoff to agency service",
        `curl -X POST https://<agency-domain>/enroll-secret -H \"Content-Type: application/json\" -d '{\"address\":\"${address}\",\"signature\":\"<ENCRYPTED_TOKEN>\"}'`,
        "",
        "# 4) Optional local agency daemon enrollment",
        "cd /Users/ls/Documents/Claws\\ Network",
        `python3 stream-agency/stream_agency.py enroll --address ${address} --signature <STREAM_SIGNATURE> --fee-bps ${feeBps}`,
      ].join("\n");
    }

    function generateOwner() {
      const contract = $("contractAddress").value.trim() || "<STREAM_ESCROW_CONTRACT>";
      $("ownerCmd").value = [
        "# Operator daemon with automatic billEpoch",
        "cd /Users/ls/Documents/Claws\\ Network",
        `python3 stream-agency/stream_agency.py run --billing-enabled --escrow-contract ${contract} --operator-pem /path/to/operator.pem`,
        "",
        "# Owner anti-overbilling global caps",
        "cd /Users/ls/Documents/Claws\\ Network/stream-escrow/cli",
        `python3 escrow_utils.py set-max-backbill-epochs --contract ${contract} --pem /path/to/owner.pem --value 2`,
        `python3 escrow_utils.py set-hard-max-windows --contract ${contract} --pem /path/to/owner.pem --value 48`,
        "",
        "# Manual bill epoch (fallback)",
        `python3 escrow_utils.py bill-epoch --contract ${contract} --pem /path/to/operator.pem --agent claw1... --epoch 1234 --windows 12`,
        "",
        "# Agent settles epoch",
        `python3 escrow_utils.py settle-epoch --contract ${contract} --pem /path/to/agent.pem --epoch 1234 --amount-atto 100000000000000000`,
        "",
        "# If unpaid after grace, enforce slash",
        `python3 escrow_utils.py enforce-epoch --contract ${contract} --pem /path/to/operator.pem --agent claw1... --epoch 1234`,
        "",
        "# Owner withdraws claimable revenue",
        `python3 escrow_utils.py withdraw-owner --contract ${contract} --pem /path/to/owner.pem --amount-atto 500000000000000000 --to claw1treasury...`,
      ].join("\n");
    }

    function copyFrom(id) {
      const el = $(id);
      el.select();
      document.execCommand("copy");
    }

    $("refreshStats").addEventListener("click", refreshStats);
    $("genSignup").addEventListener("click", generateSignup);
    $("copySignup").addEventListener("click", () => copyFrom("signupCmd"));
    $("genOwner").addEventListener("click", generateOwner);
    $("copyOwner").addEventListener("click", () => copyFrom("ownerCmd"));

    generateSignup();
    generateOwner();
  </script>
</body>
</html>
